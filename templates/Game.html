<html>
	<head>
		<style>
			table { border-collapse: collapse; }
			td {
				width: 20px;
				height: 20px;
				border: 1px solid black;
			}
			.wall {
				background-color: black;
			}
			.player {
				background-color: green;
			}
			.exit {
				background-color: red;
			}
		</style>
	</head>
	<body>
		<h1>This is the game</h1>
		<p>Timer: <span id="timer">...</span> seconds</p>
		<div id="maze_container"></div>

		<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
		<script>
			const socket = io('/game'); // Connect to the 'game' namespace

			socket.on('connect', () => {
				console.log('Connected to server');
			});

			socket.on('disconnect', () => {
				console.log('Disconnected from server');
			});

			socket.on('timer_update', data => {
				document.getElementById('timer').innerText = data.time;
			});

			socket.on('maze_data', data => {
				const maze = data.maze;
				const container = document.getElementById('maze_container');
				const table = document.createElement('table');

				// Clear previous maze
				container.innerHTML = '';
				// Populate new maze
				maze.forEach(row => {
					const tr = document.createElement('tr');
					row.forEach(cell => {
						const td = document.createElement('td');
						if (cell === 1) td.classList.add('wall');
						else if (cell === 2) td.classList.add('player');
						else if (cell === 3) td.classList.add('exit');
						tr.appendChild(td);
					});
					table.appendChild(tr);
				});

				container.appendChild(table);
			});
		</script>
	</body>
</html>